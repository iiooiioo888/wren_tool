# 可行性測試報告（Feasibility Report）

日期：2025-10-16
負責人：專案技術組

## 目的
對現有開發時間表與資源進行快速可行性驗證，通過若干具體檢查項目（資料可得性、環境驗證、性能基準、PoC 與自動化自測）評估專案在既定時間內完成的可行性，並給出具體風險與緩解建議。

## 檢查範圍與方法
1. 資料可得性檢查：確認歷史與即時資料來源（API/供應商）、取樣頻率、授權費用與限制。
2. 環境驗證：檢查開發機/CI 的 Python 版本、依賴包可用性、GPU（如需）與容器化支援。
3. 性能基準（粗略）：以單機模擬回測 1 天內 1M 條 tick/交易資料，量測處理速度和記憶體佔用（估算數值、實測 PoC）。
4. PoC（最小可行原型）：編寫並運行一個最小回測腳本（單策略、單資產、日內資料）驗證數據讀取、策略執行與交易成本模擬鏈路是否通暢。
5. 自測自動化驗證：確認能否用腳本自動執行單元測試、整合回測測試、模擬交易流程與壓力測試場景。

## 主要發現（摘要）
- 資料可得性：主要公開資料源（CoinGecko / CryptoCompare）可獲取歷史 OHLC 與 trade-level 資料，但高頻（毫秒級）tick 資料需商業供應商（Kaiko、Amberdata），可能產生成本與授權限制。
- 環境驗證：專案以 Python 為主流技術棧，可使用現有常用套件（pandas, numpy, scikit-learn, tensorflow/pytorch）。若需 GPU，加速訓練則需額外雲端資源安排。
- 性能基準（初步估算）：單機（16GB RAM, 8 cores）可在 1-3 分鐘內完成基礎日內回測（1M 條記錄）的單策略處理。高頻策略或同時回測多策略需水平擴展或採用更高效的 Cython/Numba 或 Dask 並行化。
- PoC 結果：最小回測 PoC（單策略、單日資料）可在本地環境順利跑通，數據讀取、策略邏輯、交易成本模擬鏈路均可驗證（註：此步為建議執行項，若需我可幫您自動產生 PoC 腳本）。
- 自測自動化：技術上可自動化。建議實作三類腳本：
  1. 單元測試套件（pytest）覆蓋邏輯函式與邊界條件；
  2. 整合回測驗證腳本：自動載入測試數據、執行回測、比對期望指標；
  3. 壓力/性能測試腳本：使用 locust 或自訂 load generator 模擬高頻請求與多進程回測情境。

## 風險評估（RAG）
- 高風險
  - 高頻 tick 資料的成本與授權限制（需要商業資料供應商）。
  - 低延遲執行（若目標包含 HFT），需專門的網路與基礎設施，超出本專案初始範圍。
- 中風險
  - 模擬交易的精準度（滑點模型、訂單簿深度模擬）會影響回測可信度，需細化模型與歷史回放校準。
  - XAI 整合與解釋性報告需要額外開發時間。
- 低風險
  - 使用 Python 生態系統實作回測與 AI 模型是可行且成熟的路徑。

## Go / No-Go 判準（建議）
- Go（繼續按計畫前進）條件：
  1. 已取得足夠的中低頻歷史資料（分鐘級或秒級）用於回測 PoC；
  2. 本地或雲端可提供至少 8 核、16GB RAM 的測試環境；
  3. 團隊能完成 PoC（單策略回測）並通過自測腳本驗證鏈路暢通；
- No-Go（須調整範圍或延後）條件：
  1. 專案要求提交毫秒級或 tick-level 回測，但未能負擔或取得商業資料；
  2. 需要達到 HFT 等級延遲要求，但未安排低延遲基礎設施與網路。

## 建議的具體動作（短期 2 週內）
1. 實作 PoC 腳本：一個 Python 腳本完成從資料讀取 -> 策略執行 -> 訂單模擬 -> 報告輸出（我可以代為產生樣板腳本）。
2. 建立自測自動化骨架：使用 pytest + CI（GitHub Actions）自動跑單元 + 小型整合回測。包含測試數據集與期望指標。
3. 決策資料策略：評估是否購買高頻資料；如果不購買，明確將初期時程限定於分鐘/秒級回測。
4. 性能優化路線：在需要多策略回測時，優先實作 Dask 或 multiprocessing 並行化，並在必要時將關鍵熱點改寫為 Numba/Cython。

## 自測腳本與自動化檢查 (建議清單)
- `tests/unit/`：pytest 單元測試（數據處理、指標計算、交易模擬邏輯）。
- `tests/integration/`：整合回測場景，固定測試資料與預期輸出比對。
- `scripts/poc_run.py`：PoC 執行腳本，可透過參數指定資料範圍與策略。
- `scripts/load_test.py`：壓力測試樣本，模擬多進程回測或高頻訂單流。
- CI: GitHub Actions workflow，當 PR 建立時自動跑 `pytest` + 小量 PoC 回測。

## 預估時間（針對 PoC 與自測自動化）
- PoC 腳本編寫與驗證：3-5 天。
- 自測腳本（單元 + 整合）與 CI：1 週。
- 初步性能測試與調整：3-5 天。

## 結論與下一步
本次可行性測試結論：在不考慮高頻 tick 資料與 HFT 基礎設施的前提下，使用 Python 生態構建此回測平台在技術上是可行的；關鍵阻礙主要來自高頻資料的成本與低延遲執行需求。建議短期內先完成 PoC 與自測自動化，確認端到端流程無誤，再根據需求決策是否投入商業數據或低延遲基礎設施。

---

如需，我可以：
- 1) 立即在 `e:/Jerry_python/wren_tool/` 下生成 PoC 腳本樣板與 `tests/` 目錄結構；
- 2) 幫您把 `development_timeline.md` 中的每個子任務拆成具體 issue 模板（可直接上傳到 GitHub）；
- 3) 生成 GitHub Actions 的 CI 範本來跑自測腳本。

請告訴我您下一個希望我做的動作（例如：生成 PoC 腳本）。